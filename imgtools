# HG changeset patch
# Parent d777382a1fed8005a144a5a6a77ff683abbfc4bd
# User Mihnea Dobrescu-Balaur <mihneadb@gmail.com>
Bug 903864 - make test_imgtools use do_get_tempdir()


diff --git a/image/test/unit/test_imgtools.js b/image/test/unit/test_imgtools.js
--- a/image/test/unit/test_imgtools.js
+++ b/image/test/unit/test_imgtools.js
@@ -8,21 +8,17 @@ const Cc = Components.classes;
 
 /*
  * dumpToFile()
  *
  * For test development, dumps the specified array to a file.
  * Call |dumpToFile(outData);| in a test to file to a file.
  */
 function dumpToFile(aData) {
-    const path = "/tmp";
-
-    var outputFile = Cc["@mozilla.org/file/local;1"].
-                     createInstance(Ci.nsILocalFile);
-    outputFile.initWithPath(path);
+    var outputFile = do_get_tempdir();
     outputFile.append("testdump.png");
 
     var outputStream = Cc["@mozilla.org/network/file-output-stream;1"].
                        createInstance(Ci.nsIFileOutputStream);
     // WR_ONLY|CREAT|TRUNC
     outputStream.init(outputFile, 0x02 | 0x08 | 0x20, 0644, null);
 
     var bos = Cc["@mozilla.org/binaryoutputstream;1"].
